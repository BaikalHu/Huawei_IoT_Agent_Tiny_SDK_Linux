GAS LISTING /tmp/ccuSnRYy.s 			page 1


   1              		.file	"atiny_socket.c"
   2              		.text
   3              	.Ltext0:
   4              		.section	.rodata.str1.8,"aMS",@progbits,1
   5              		.align 8
   6              	.LC0:
   7 0000 5B534F43 		.string	"[SOCKET][%s:%d] ilegal incoming parameters\r\n"
   7      4B45545D 
   7      5B25733A 
   7      25645D20 
   7      696C6567 
   8 002d 000000   		.align 8
   9              	.LC1:
  10 0030 5B534F43 		.string	"[SOCKET][%s:%d] try to do name resolution now...\r\n"
  10      4B45545D 
  10      5B25733A 
  10      25645D20 
  10      74727920 
  11 0063 00000000 		.align 8
  11      00
  12              	.LC2:
  13 0068 5B534F43 		.string	"[SOCKET][%s:%d] getaddrinfo failed: 0x%x\r\n"
  13      4B45545D 
  13      5B25733A 
  13      25645D20 
  13      67657461 
  14 0093 00000000 		.align 8
  14      00
  15              	.LC3:
  16 0098 5B534F43 		.string	"[SOCKET][%s:%d] do name resolution succeed\r\n"
  16      4B45545D 
  16      5B25733A 
  16      25645D20 
  16      646F206E 
  17 00c5 000000   		.align 8
  18              	.LC4:
  19 00c8 5B534F43 		.string	"[SOCKET][%s:%d] malloc failed for socket context\r\n"
  19      4B45545D 
  19      5B25733A 
  19      25645D20 
  19      6D616C6C 
  20 00fb 00000000 		.align 8
  20      00
  21              	.LC5:
  22 0100 5B534F43 		.string	"[SOCKET][%s:%d] unkown host(%s) or port(%s)\r\n"
  22      4B45545D 
  22      5B25733A 
  22      25645D20 
  22      756E6B6F 
  23 012e 0000     		.align 8
  24              	.LC6:
  25 0130 5B534F43 		.string	"[SOCKET][%s:%d] UDP create socket and bind to server(%s:%s) finished\r\n"
  25      4B45545D 
  25      5B25733A 
  25      25645D20 
  25      55445020 
  26 0177 00       		.align 8
GAS LISTING /tmp/ccuSnRYy.s 			page 2


  27              	.LC7:
  28 0178 5B534F43 		.string	"[SOCKET][%s:%d] TCP connect to server(%s:%s) succeed\r\n"
  28      4B45545D 
  28      5B25733A 
  28      25645D20 
  28      54435020 
  29              		.section	.text.atiny_net_connect,"ax",@progbits
  30              		.globl	atiny_net_connect
  32              	atiny_net_connect:
  33              	.LFB66:
  34              		.file 1 "/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_so
   1:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** /*----------------------------------------------------------------------------
   2:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * All rights reserved.
   4:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * are permitted provided that the following conditions are met:
   6:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * conditions and the following disclaimer.
   8:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * provided with the distribution.
  11:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * to endorse or promote products derived from this software without specific prior written
  13:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * permission.
  14:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  *---------------------------------------------------------------------------*/
  26:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** /*----------------------------------------------------------------------------
  27:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * Notice of Export Control Law
  28:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * ===============================================
  29:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  * applicable export control laws and regulations.
  33:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****  *---------------------------------------------------------------------------*/
  34:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  35:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "atiny_socket.h"
  36:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "atiny_adapter.h"
  37:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  38:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  39:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX)
  40:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <sys/types.h>
  41:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <sys/socket.h>
  42:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <netinet/in.h>
  43:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <arpa/inet.h>
  44:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <sys/time.h>
  45:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <unistd.h>
  46:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <fcntl.h>
GAS LISTING /tmp/ccuSnRYy.s 			page 3


  47:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <netdb.h>
  48:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include <errno.h>
  49:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_LWIP)
  50:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "lwip/sockets.h"
  51:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "lwip/netdb.h"
  52:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "lwip/errno.h"
  53:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
  54:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "at_api_interface.h"
  55:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
  56:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #include "wiznet.h"
  57:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
  58:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** // TODO
  59:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
  60:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  61:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #define SOCKET_DEBUG
  62:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  63:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(SOCKET_DEBUG)
  64:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #define SOCKET_LOG(fmt, ...) \
  65:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     do \
  66:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     { \
  67:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         (void)atiny_printf("[SOCKET][%s:%d] " fmt "\r\n", \
  68:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         __FUNCTION__, __LINE__, ##__VA_ARGS__); \
  69:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     } while(0)
  70:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
  71:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #define SOCKET_LOG(fmt, ...) ((void)0)
  72:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
  73:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  74:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  75:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** typedef struct
  76:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
  77:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int fd;
  78:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** } atiny_net_context;
  79:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  80:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** void *atiny_net_connect(const char *host, const char *port, int proto)
  81:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
  35              		.loc 1 81 0
  36              		.cfi_startproc
  37              	.LVL0:
  38 0000 4156     		pushq	%r14
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 16
  41              		.cfi_offset 14, -16
  42 0002 4155     		pushq	%r13
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 24
  45              		.cfi_offset 13, -24
  46 0004 4154     		pushq	%r12
  47              	.LCFI2:
  48              		.cfi_def_cfa_offset 32
  49              		.cfi_offset 12, -32
  50 0006 55       		pushq	%rbp
  51              	.LCFI3:
  52              		.cfi_def_cfa_offset 40
  53              		.cfi_offset 6, -40
  54 0007 53       		pushq	%rbx
  55              	.LCFI4:
  56              		.cfi_def_cfa_offset 48
GAS LISTING /tmp/ccuSnRYy.s 			page 4


  57              		.cfi_offset 3, -48
  58 0008 4883EC40 		subq	$64, %rsp
  59              	.LCFI5:
  60              		.cfi_def_cfa_offset 112
  61 000c 4189D4   		movl	%edx, %r12d
  62              	.LVL1:
  82:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     atiny_net_context *ctx = NULL;
  83:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
  84:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int flags;
  85:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int ret;
  86:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     struct addrinfo hints;
  87:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     struct addrinfo *addr_list;
  88:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     struct addrinfo *cur;
  89:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  90:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (NULL == host || NULL == port ||
  63              		.loc 1 90 0
  64 000f 4885FF   		testq	%rdi, %rdi
  65 0012 0F94C2   		sete	%dl
  66              	.LVL2:
  67 0015 4885F6   		testq	%rsi, %rsi
  68 0018 0F94C0   		sete	%al
  69 001b 08C2     		orb	%al, %dl
  70 001d 750C     		jne	.L2
  71 001f 4989FD   		movq	%rdi, %r13
  72 0022 4989F6   		movq	%rsi, %r14
  73              		.loc 1 90 0 is_stmt 0 discriminator 1
  74 0025 4183FC01 		cmpl	$1, %r12d
  75 0029 7623     		jbe	.L3
  76              	.L2:
  91:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             (proto != ATINY_PROTO_UDP && proto != ATINY_PROTO_TCP))
  92:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
  93:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("ilegal incoming parameters");
  77              		.loc 1 93 0 is_stmt 1
  78 002b BA5D0000 		movl	$93, %edx
  78      00
  79 0030 BE000000 		movl	$__FUNCTION__.4740, %esi
  79      00
  80              	.LVL3:
  81 0035 BF000000 		movl	$.LC0, %edi
  81      00
  82              	.LVL4:
  83 003a B8000000 		movl	$0, %eax
  83      00
  84 003f E8000000 		call	atiny_printf
  84      00
  85              	.LVL5:
  94:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
  86              		.loc 1 94 0
  87 0044 B8000000 		movl	$0, %eax
  87      00
  88 0049 E9140200 		jmp	.L4
  88      00
  89              	.LVL6:
  90              	.L3:
  91              	.LBB6:
  92              	.LBB7:
  93              		.file 2 "/usr/include/x86_64-linux-gnu/bits/string3.h"
GAS LISTING /tmp/ccuSnRYy.s 			page 5


   1:/usr/include/x86_64-linux-gnu/bits/string3.h **** /* Copyright (C) 2004-2016 Free Software Foundation, Inc.
   2:/usr/include/x86_64-linux-gnu/bits/string3.h ****    This file is part of the GNU C Library.
   3:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
   4:/usr/include/x86_64-linux-gnu/bits/string3.h ****    The GNU C Library is free software; you can redistribute it and/or
   5:/usr/include/x86_64-linux-gnu/bits/string3.h ****    modify it under the terms of the GNU Lesser General Public
   6:/usr/include/x86_64-linux-gnu/bits/string3.h ****    License as published by the Free Software Foundation; either
   7:/usr/include/x86_64-linux-gnu/bits/string3.h ****    version 2.1 of the License, or (at your option) any later version.
   8:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
   9:/usr/include/x86_64-linux-gnu/bits/string3.h ****    The GNU C Library is distributed in the hope that it will be useful,
  10:/usr/include/x86_64-linux-gnu/bits/string3.h ****    but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:/usr/include/x86_64-linux-gnu/bits/string3.h ****    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  12:/usr/include/x86_64-linux-gnu/bits/string3.h ****    Lesser General Public License for more details.
  13:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  14:/usr/include/x86_64-linux-gnu/bits/string3.h ****    You should have received a copy of the GNU Lesser General Public
  15:/usr/include/x86_64-linux-gnu/bits/string3.h ****    License along with the GNU C Library; if not, see
  16:/usr/include/x86_64-linux-gnu/bits/string3.h ****    <http://www.gnu.org/licenses/>.  */
  17:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  18:/usr/include/x86_64-linux-gnu/bits/string3.h **** #ifndef _STRING_H
  19:/usr/include/x86_64-linux-gnu/bits/string3.h **** # error "Never use <bits/string3.h> directly; include <string.h> instead."
  20:/usr/include/x86_64-linux-gnu/bits/string3.h **** #endif
  21:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  22:/usr/include/x86_64-linux-gnu/bits/string3.h **** #if !__GNUC_PREREQ (5,0)
  23:/usr/include/x86_64-linux-gnu/bits/string3.h **** __warndecl (__warn_memset_zero_len,
  24:/usr/include/x86_64-linux-gnu/bits/string3.h **** 	    "memset used with constant zero length parameter; this could be due to transposed parameters")
  25:/usr/include/x86_64-linux-gnu/bits/string3.h **** #endif
  26:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  27:/usr/include/x86_64-linux-gnu/bits/string3.h **** #ifndef __cplusplus
  28:/usr/include/x86_64-linux-gnu/bits/string3.h **** /* XXX This is temporarily.  We should not redefine any of the symbols
  29:/usr/include/x86_64-linux-gnu/bits/string3.h ****    and instead integrate the error checking into the original
  30:/usr/include/x86_64-linux-gnu/bits/string3.h ****    definitions.  */
  31:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef memcpy
  32:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef memmove
  33:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef memset
  34:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef strcat
  35:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef strcpy
  36:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef strncat
  37:/usr/include/x86_64-linux-gnu/bits/string3.h **** # undef strncpy
  38:/usr/include/x86_64-linux-gnu/bits/string3.h **** # ifdef __USE_GNU
  39:/usr/include/x86_64-linux-gnu/bits/string3.h **** #  undef mempcpy
  40:/usr/include/x86_64-linux-gnu/bits/string3.h **** #  undef stpcpy
  41:/usr/include/x86_64-linux-gnu/bits/string3.h **** # endif
  42:/usr/include/x86_64-linux-gnu/bits/string3.h **** # ifdef __USE_MISC
  43:/usr/include/x86_64-linux-gnu/bits/string3.h **** #  undef bcopy
  44:/usr/include/x86_64-linux-gnu/bits/string3.h **** #  undef bzero
  45:/usr/include/x86_64-linux-gnu/bits/string3.h **** # endif
  46:/usr/include/x86_64-linux-gnu/bits/string3.h **** #endif
  47:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  48:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  49:/usr/include/x86_64-linux-gnu/bits/string3.h **** __fortify_function void *
  50:/usr/include/x86_64-linux-gnu/bits/string3.h **** __NTH (memcpy (void *__restrict __dest, const void *__restrict __src,
  51:/usr/include/x86_64-linux-gnu/bits/string3.h **** 	       size_t __len))
  52:/usr/include/x86_64-linux-gnu/bits/string3.h **** {
  53:/usr/include/x86_64-linux-gnu/bits/string3.h ****   return __builtin___memcpy_chk (__dest, __src, __len, __bos0 (__dest));
  54:/usr/include/x86_64-linux-gnu/bits/string3.h **** }
  55:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  56:/usr/include/x86_64-linux-gnu/bits/string3.h **** __fortify_function void *
  57:/usr/include/x86_64-linux-gnu/bits/string3.h **** __NTH (memmove (void *__dest, const void *__src, size_t __len))
GAS LISTING /tmp/ccuSnRYy.s 			page 6


  58:/usr/include/x86_64-linux-gnu/bits/string3.h **** {
  59:/usr/include/x86_64-linux-gnu/bits/string3.h ****   return __builtin___memmove_chk (__dest, __src, __len, __bos0 (__dest));
  60:/usr/include/x86_64-linux-gnu/bits/string3.h **** }
  61:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  62:/usr/include/x86_64-linux-gnu/bits/string3.h **** #ifdef __USE_GNU
  63:/usr/include/x86_64-linux-gnu/bits/string3.h **** __fortify_function void *
  64:/usr/include/x86_64-linux-gnu/bits/string3.h **** __NTH (mempcpy (void *__restrict __dest, const void *__restrict __src,
  65:/usr/include/x86_64-linux-gnu/bits/string3.h **** 		size_t __len))
  66:/usr/include/x86_64-linux-gnu/bits/string3.h **** {
  67:/usr/include/x86_64-linux-gnu/bits/string3.h ****   return __builtin___mempcpy_chk (__dest, __src, __len, __bos0 (__dest));
  68:/usr/include/x86_64-linux-gnu/bits/string3.h **** }
  69:/usr/include/x86_64-linux-gnu/bits/string3.h **** #endif
  70:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  71:/usr/include/x86_64-linux-gnu/bits/string3.h **** 
  72:/usr/include/x86_64-linux-gnu/bits/string3.h **** /* The first two tests here help to catch a somewhat common problem
  73:/usr/include/x86_64-linux-gnu/bits/string3.h ****    where the second and third parameter are transposed.  This is
  74:/usr/include/x86_64-linux-gnu/bits/string3.h ****    especially problematic if the intended fill value is zero.  In this
  75:/usr/include/x86_64-linux-gnu/bits/string3.h ****    case no work is done at all.  We detect these problems by referring
  76:/usr/include/x86_64-linux-gnu/bits/string3.h ****    non-existing functions.  */
  77:/usr/include/x86_64-linux-gnu/bits/string3.h **** __fortify_function void *
  78:/usr/include/x86_64-linux-gnu/bits/string3.h **** __NTH (memset (void *__dest, int __ch, size_t __len))
  79:/usr/include/x86_64-linux-gnu/bits/string3.h **** {
  80:/usr/include/x86_64-linux-gnu/bits/string3.h ****   /* GCC-5.0 and newer implements these checks in the compiler, so we don't
  81:/usr/include/x86_64-linux-gnu/bits/string3.h ****      need them here.  */
  82:/usr/include/x86_64-linux-gnu/bits/string3.h **** #if !__GNUC_PREREQ (5,0)
  83:/usr/include/x86_64-linux-gnu/bits/string3.h ****   if (__builtin_constant_p (__len) && __len == 0
  84:/usr/include/x86_64-linux-gnu/bits/string3.h ****       && (!__builtin_constant_p (__ch) || __ch != 0))
  85:/usr/include/x86_64-linux-gnu/bits/string3.h ****     {
  86:/usr/include/x86_64-linux-gnu/bits/string3.h ****       __warn_memset_zero_len ();
  87:/usr/include/x86_64-linux-gnu/bits/string3.h ****       return __dest;
  88:/usr/include/x86_64-linux-gnu/bits/string3.h ****     }
  89:/usr/include/x86_64-linux-gnu/bits/string3.h **** #endif
  90:/usr/include/x86_64-linux-gnu/bits/string3.h ****   return __builtin___memset_chk (__dest, __ch, __len, __bos0 (__dest));
  94              		.loc 2 90 0
  95 004e 488D5424 		leaq	16(%rsp), %rdx
  95      10
  96              	.LVL7:
  97 0053 B9060000 		movl	$6, %ecx
  97      00
  98 0058 B8000000 		movl	$0, %eax
  98      00
  99 005d 4889D7   		movq	%rdx, %rdi
 100              	.LVL8:
 101 0060 F348AB   		rep stosq
 102              	.LVL9:
 103              	.LBE7:
 104              	.LBE6:
  95:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
  96:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
  97:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     /* Do name resolution with both IPv6 and IPv4 */
  98:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     memset(&hints, 0, sizeof(hints));
  99:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     hints.ai_family = AF_UNSPEC;
 100:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     hints.ai_socktype = proto == ATINY_PROTO_UDP ? SOCK_DGRAM : SOCK_STREAM;
 105              		.loc 1 100 0
 106 0063 4183FC01 		cmpl	$1, %r12d
 107 0067 7507     		jne	.L17
 108 0069 B8020000 		movl	$2, %eax
GAS LISTING /tmp/ccuSnRYy.s 			page 7


 108      00
 109 006e EB05     		jmp	.L5
 110              	.L17:
 111 0070 B8010000 		movl	$1, %eax
 111      00
 112              	.L5:
 113              		.loc 1 100 0 is_stmt 0 discriminator 4
 114 0075 89442418 		movl	%eax, 24(%rsp)
 101:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     hints.ai_protocol = proto == ATINY_PROTO_UDP ? IPPROTO_UDP : IPPROTO_TCP;
 115              		.loc 1 101 0 is_stmt 1 discriminator 4
 116 0079 4183FC01 		cmpl	$1, %r12d
 117 007d 7507     		jne	.L18
 118              		.loc 1 101 0 is_stmt 0
 119 007f B8110000 		movl	$17, %eax
 119      00
 120 0084 EB05     		jmp	.L6
 121              	.L18:
 122 0086 B8060000 		movl	$6, %eax
 122      00
 123              	.L6:
 124              		.loc 1 101 0 discriminator 4
 125 008b 8944241C 		movl	%eax, 28(%rsp)
 102:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 103:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     SOCKET_LOG("try to do name resolution now...");
 126              		.loc 1 103 0 is_stmt 1 discriminator 4
 127 008f BA670000 		movl	$103, %edx
 127      00
 128 0094 BE000000 		movl	$__FUNCTION__.4740, %esi
 128      00
 129              	.LVL10:
 130 0099 BF000000 		movl	$.LC1, %edi
 130      00
 131 009e B8000000 		movl	$0, %eax
 131      00
 132 00a3 E8000000 		call	atiny_printf
 132      00
 133              	.LVL11:
 104:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 105:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if ((ret = getaddrinfo(host, port, &hints, &addr_list)) != 0)
 134              		.loc 1 105 0 discriminator 4
 135 00a8 488D4C24 		leaq	8(%rsp), %rcx
 135      08
 136 00ad 488D5424 		leaq	16(%rsp), %rdx
 136      10
 137 00b2 4C89F6   		movq	%r14, %rsi
 138 00b5 4C89EF   		movq	%r13, %rdi
 139 00b8 E8000000 		call	getaddrinfo
 139      00
 140              	.LVL12:
 141 00bd 85C0     		testl	%eax, %eax
 142 00bf 7425     		je	.L7
 106:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 107:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("getaddrinfo failed: 0x%x", ret);
 143              		.loc 1 107 0
 144 00c1 89C1     		movl	%eax, %ecx
 145 00c3 BA6B0000 		movl	$107, %edx
 145      00
GAS LISTING /tmp/ccuSnRYy.s 			page 8


 146 00c8 BE000000 		movl	$__FUNCTION__.4740, %esi
 146      00
 147 00cd BF000000 		movl	$.LC2, %edi
 147      00
 148 00d2 B8000000 		movl	$0, %eax
 148      00
 149              	.LVL13:
 150 00d7 E8000000 		call	atiny_printf
 150      00
 151              	.LVL14:
 108:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
 152              		.loc 1 108 0
 153 00dc B8000000 		movl	$0, %eax
 153      00
 154 00e1 E97C0100 		jmp	.L4
 154      00
 155              	.LVL15:
 156              	.L7:
 109:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 110:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 111:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     SOCKET_LOG("do name resolution succeed");
 157              		.loc 1 111 0
 158 00e6 BA6F0000 		movl	$111, %edx
 158      00
 159 00eb BE000000 		movl	$__FUNCTION__.4740, %esi
 159      00
 160 00f0 BF000000 		movl	$.LC3, %edi
 160      00
 161 00f5 B8000000 		movl	$0, %eax
 161      00
 162              	.LVL16:
 163 00fa E8000000 		call	atiny_printf
 163      00
 164              	.LVL17:
 112:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 113:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx = atiny_malloc(sizeof(atiny_net_context));
 165              		.loc 1 113 0
 166 00ff BF040000 		movl	$4, %edi
 166      00
 167 0104 E8000000 		call	atiny_malloc
 167      00
 168              	.LVL18:
 169 0109 4889C5   		movq	%rax, %rbp
 170              	.LVL19:
 114:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 115:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (NULL == ctx)
 171              		.loc 1 115 0
 172 010c 4885C0   		testq	%rax, %rax
 173 010f 752D     		jne	.L8
 116:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 117:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("malloc failed for socket context");
 174              		.loc 1 117 0
 175 0111 BA750000 		movl	$117, %edx
 175      00
 176 0116 BE000000 		movl	$__FUNCTION__.4740, %esi
 176      00
 177 011b BF000000 		movl	$.LC4, %edi
GAS LISTING /tmp/ccuSnRYy.s 			page 9


 177      00
 178 0120 B8000000 		movl	$0, %eax
 178      00
 179              	.LVL20:
 180 0125 E8000000 		call	atiny_printf
 180      00
 181              	.LVL21:
 118:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         freeaddrinfo(addr_list);
 182              		.loc 1 118 0
 183 012a 488B7C24 		movq	8(%rsp), %rdi
 183      08
 184 012f E8000000 		call	freeaddrinfo
 184      00
 185              	.LVL22:
 119:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
 186              		.loc 1 119 0
 187 0134 B8000000 		movl	$0, %eax
 187      00
 188 0139 E9240100 		jmp	.L4
 188      00
 189              	.LVL23:
 190              	.L8:
 120:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 121:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 122:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx->fd = -1;
 191              		.loc 1 122 0
 192 013e C700FFFF 		movl	$-1, (%rax)
 192      FFFF
 123:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 124:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     /* Try the sockaddrs until a connection succeeds */
 125:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     for (cur = addr_list; cur != NULL; cur = cur->ai_next)
 193              		.loc 1 125 0
 194 0144 488B5C24 		movq	8(%rsp), %rbx
 194      08
 195              	.LVL24:
 196 0149 E9810000 		jmp	.L9
 196      00
 197              	.LVL25:
 198              	.L14:
 126:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 127:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         ctx->fd = socket(cur->ai_family, cur->ai_socktype, cur->ai_protocol);
 199              		.loc 1 127 0
 200 014e 8B530C   		movl	12(%rbx), %edx
 201 0151 8B7308   		movl	8(%rbx), %esi
 202 0154 8B7B04   		movl	4(%rbx), %edi
 203 0157 E8000000 		call	socket
 203      00
 204              	.LVL26:
 205 015c 894500   		movl	%eax, 0(%rbp)
 128:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 129:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         if (ctx->fd < 0)
 206              		.loc 1 129 0
 207 015f 85C0     		testl	%eax, %eax
 208 0161 7868     		js	.L10
 130:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 131:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             continue;
 132:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
GAS LISTING /tmp/ccuSnRYy.s 			page 10


 133:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 134:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         flags = fcntl(ctx->fd, F_GETFL, 0);
 209              		.loc 1 134 0
 210 0163 BA000000 		movl	$0, %edx
 210      00
 211 0168 BE030000 		movl	$3, %esi
 211      00
 212 016d 89C7     		movl	%eax, %edi
 213 016f B8000000 		movl	$0, %eax
 213      00
 214 0174 E8000000 		call	fcntl
 214      00
 215              	.LVL27:
 135:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 136:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         if (flags < 0 || fcntl(ctx->fd, F_SETFL, flags | O_NONBLOCK) < 0)
 216              		.loc 1 136 0
 217 0179 85C0     		testl	%eax, %eax
 218 017b 781B     		js	.L11
 219              		.loc 1 136 0 is_stmt 0 discriminator 1
 220 017d 80CC08   		orb	$8, %ah
 221              	.LVL28:
 222 0180 89C2     		movl	%eax, %edx
 223 0182 BE040000 		movl	$4, %esi
 223      00
 224 0187 8B7D00   		movl	0(%rbp), %edi
 225 018a B8000000 		movl	$0, %eax
 225      00
 226 018f E8000000 		call	fcntl
 226      00
 227              	.LVL29:
 228 0194 85C0     		testl	%eax, %eax
 229 0196 7911     		jns	.L12
 230              	.L11:
 137:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 138:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             close(ctx->fd);
 231              		.loc 1 138 0 is_stmt 1
 232 0198 8B7D00   		movl	0(%rbp), %edi
 233 019b E8000000 		call	close
 233      00
 234              	.LVL30:
 139:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             ctx->fd = -1;
 235              		.loc 1 139 0
 236 01a0 C74500FF 		movl	$-1, 0(%rbp)
 236      FFFFFF
 140:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             continue;
 237              		.loc 1 140 0
 238 01a7 EB22     		jmp	.L10
 239              	.L12:
 141:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 142:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 143:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         if (connect(ctx->fd, cur->ai_addr, cur->ai_addrlen) == 0)
 240              		.loc 1 143 0
 241 01a9 488B7318 		movq	24(%rbx), %rsi
 242 01ad 8B5310   		movl	16(%rbx), %edx
 243 01b0 8B7D00   		movl	0(%rbp), %edi
 244 01b3 E8000000 		call	connect
 244      00
GAS LISTING /tmp/ccuSnRYy.s 			page 11


 245              	.LVL31:
 246 01b8 85C0     		testl	%eax, %eax
 247 01ba 741C     		je	.L13
 144:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 145:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             break;
 146:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 147:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 148:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         close(ctx->fd);
 248              		.loc 1 148 0
 249 01bc 8B7D00   		movl	0(%rbp), %edi
 250 01bf E8000000 		call	close
 250      00
 251              	.LVL32:
 149:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         ctx->fd = -1;
 252              		.loc 1 149 0
 253 01c4 C74500FF 		movl	$-1, 0(%rbp)
 253      FFFFFF
 254              	.L10:
 125:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 255              		.loc 1 125 0 discriminator 2
 256 01cb 488B5B28 		movq	40(%rbx), %rbx
 257              	.LVL33:
 258              	.L9:
 125:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 259              		.loc 1 125 0 is_stmt 0 discriminator 1
 260 01cf 4885DB   		testq	%rbx, %rbx
 261 01d2 0F8576FF 		jne	.L14
 261      FFFF
 262              	.L13:
 150:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 151:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 152:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     freeaddrinfo(addr_list);
 263              		.loc 1 152 0 is_stmt 1
 264 01d8 488B7C24 		movq	8(%rsp), %rdi
 264      08
 265 01dd E8000000 		call	freeaddrinfo
 265      00
 266              	.LVL34:
 153:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 154:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ctx->fd < 0)
 267              		.loc 1 154 0
 268 01e2 837D0000 		cmpl	$0, 0(%rbp)
 269 01e6 792E     		jns	.L15
 155:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 156:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("unkown host(%s) or port(%s)", host, port);
 270              		.loc 1 156 0
 271 01e8 4D89F0   		movq	%r14, %r8
 272 01eb 4C89E9   		movq	%r13, %rcx
 273 01ee BA9C0000 		movl	$156, %edx
 273      00
 274 01f3 BE000000 		movl	$__FUNCTION__.4740, %esi
 274      00
 275 01f8 BF000000 		movl	$.LC5, %edi
 275      00
 276 01fd B8000000 		movl	$0, %eax
 276      00
 277 0202 E8000000 		call	atiny_printf
GAS LISTING /tmp/ccuSnRYy.s 			page 12


 277      00
 278              	.LVL35:
 157:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         atiny_free(ctx);
 279              		.loc 1 157 0
 280 0207 4889EF   		movq	%rbp, %rdi
 281 020a E8000000 		call	atiny_free
 281      00
 282              	.LVL36:
 158:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
 283              		.loc 1 158 0
 284 020f B8000000 		movl	$0, %eax
 284      00
 285 0214 EB4C     		jmp	.L4
 286              	.L15:
 159:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 160:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 161:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (proto == ATINY_PROTO_UDP)
 287              		.loc 1 161 0
 288 0216 4183FC01 		cmpl	$1, %r12d
 289 021a 7524     		jne	.L16
 162:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 163:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("UDP create socket and bind to server(%s:%s) finished", host, port);
 290              		.loc 1 163 0
 291 021c 4D89F0   		movq	%r14, %r8
 292 021f 4C89E9   		movq	%r13, %rcx
 293 0222 BAA30000 		movl	$163, %edx
 293      00
 294 0227 BE000000 		movl	$__FUNCTION__.4740, %esi
 294      00
 295 022c BF000000 		movl	$.LC6, %edi
 295      00
 296 0231 B8000000 		movl	$0, %eax
 296      00
 297 0236 E8000000 		call	atiny_printf
 297      00
 298              	.LVL37:
 164:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 165:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     else /* proto == ATINY_PROTO_TCP */
 166:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 167:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("TCP connect to server(%s:%s) succeed", host, port);
 168:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 169:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
 170:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx = atiny_malloc(sizeof(atiny_net_context));
 171:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (NULL == ctx)
 172:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 173:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("malloc failed for socket context");
 174:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
 175:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 176:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 177:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx->fd = at_api_connect(host, port, proto);
 178:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ctx->fd < 0)
 179:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 180:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("unkown host(%s) or port(%s)", host, port);
 181:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         atiny_free(ctx);
 182:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         ctx = NULL;
 183:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 184:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
GAS LISTING /tmp/ccuSnRYy.s 			page 13


 185:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx = atiny_malloc(sizeof(atiny_net_context));
 186:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (NULL == ctx)
 187:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 188:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("malloc failed for socket context");
 189:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return NULL;
 190:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 191:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 192:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ctx->fd = wiznet_connect(host, port, proto);
 193:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ctx->fd < 0)
 194:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 195:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("unkown host(%s) or port(%s)", host, port);
 196:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         atiny_free(ctx);
 197:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         ctx = NULL;
 198:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 199:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
 200:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 201:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     return ctx;
 299              		.loc 1 201 0
 300 023b 4889E8   		movq	%rbp, %rax
 301 023e EB22     		jmp	.L4
 302              	.L16:
 167:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 303              		.loc 1 167 0
 304 0240 4D89F0   		movq	%r14, %r8
 305 0243 4C89E9   		movq	%r13, %rcx
 306 0246 BAA70000 		movl	$167, %edx
 306      00
 307 024b BE000000 		movl	$__FUNCTION__.4740, %esi
 307      00
 308 0250 BF000000 		movl	$.LC7, %edi
 308      00
 309 0255 B8000000 		movl	$0, %eax
 309      00
 310 025a E8000000 		call	atiny_printf
 310      00
 311              	.LVL38:
 312              		.loc 1 201 0
 313 025f 4889E8   		movq	%rbp, %rax
 314              	.LVL39:
 315              	.L4:
 202:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** }
 316              		.loc 1 202 0
 317 0262 4883C440 		addq	$64, %rsp
 318              	.LCFI6:
 319              		.cfi_def_cfa_offset 48
 320 0266 5B       		popq	%rbx
 321              	.LCFI7:
 322              		.cfi_def_cfa_offset 40
 323 0267 5D       		popq	%rbp
 324              	.LCFI8:
 325              		.cfi_def_cfa_offset 32
 326 0268 415C     		popq	%r12
 327              	.LCFI9:
 328              		.cfi_def_cfa_offset 24
 329              	.LVL40:
 330 026a 415D     		popq	%r13
 331              	.LCFI10:
GAS LISTING /tmp/ccuSnRYy.s 			page 14


 332              		.cfi_def_cfa_offset 16
 333 026c 415E     		popq	%r14
 334              	.LCFI11:
 335              		.cfi_def_cfa_offset 8
 336 026e C3       		ret
 337              		.cfi_endproc
 338              	.LFE66:
 340              		.section	.rodata.str1.8
 341 01af 00       		.align 8
 342              	.LC8:
 343 01b0 5B534F43 		.string	"[SOCKET][%s:%d] no data available for now\r\n"
 343      4B45545D 
 343      5B25733A 
 343      25645D20 
 343      6E6F2064 
 344 01dc 00000000 		.align 8
 345              	.LC9:
 346 01e0 5B534F43 		.string	"[SOCKET][%s:%d] error accured when recv: 0x%x\r\n"
 346      4B45545D 
 346      5B25733A 
 346      25645D20 
 346      6572726F 
 347              		.align 8
 348              	.LC10:
 349 0210 5B534F43 		.string	"[SOCKET][%s:%d] socket was closed by peer\r\n"
 349      4B45545D 
 349      5B25733A 
 349      25645D20 
 349      736F636B 
 350              		.section	.text.atiny_net_recv,"ax",@progbits
 351              		.globl	atiny_net_recv
 353              	atiny_net_recv:
 354              	.LFB67:
 203:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 204:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** int atiny_net_recv(void *ctx, unsigned char *buf, size_t len)
 205:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
 355              		.loc 1 205 0
 356              		.cfi_startproc
 357              	.LVL41:
 358 0000 4883EC08 		subq	$8, %rsp
 359              	.LCFI12:
 360              		.cfi_def_cfa_offset 16
 361              	.LVL42:
 206:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int ret = -1;
 207:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int fd = ((atiny_net_context *)ctx)->fd;
 362              		.loc 1 207 0
 363 0004 8B3F     		movl	(%rdi), %edi
 364              	.LVL43:
 365              	.LBB8:
 366              	.LBB9:
 367              		.file 3 "/usr/include/x86_64-linux-gnu/bits/socket2.h"
   1:/usr/include/x86_64-linux-gnu/bits/socket2.h **** /* Checking macros for socket functions.
   2:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    Copyright (C) 2005-2016 Free Software Foundation, Inc.
   3:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    This file is part of the GNU C Library.
   4:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
   5:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    The GNU C Library is free software; you can redistribute it and/or
   6:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    modify it under the terms of the GNU Lesser General Public
GAS LISTING /tmp/ccuSnRYy.s 			page 15


   7:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    License as published by the Free Software Foundation; either
   8:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    version 2.1 of the License, or (at your option) any later version.
   9:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  10:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    The GNU C Library is distributed in the hope that it will be useful,
  11:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    but WITHOUT ANY WARRANTY; without even the implied warranty of
  12:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  13:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    Lesser General Public License for more details.
  14:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  15:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    You should have received a copy of the GNU Lesser General Public
  16:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    License along with the GNU C Library; if not, see
  17:/usr/include/x86_64-linux-gnu/bits/socket2.h ****    <http://www.gnu.org/licenses/>.  */
  18:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  19:/usr/include/x86_64-linux-gnu/bits/socket2.h **** #ifndef _SYS_SOCKET_H
  20:/usr/include/x86_64-linux-gnu/bits/socket2.h **** # error "Never include <bits/socket2.h> directly; use <sys/socket.h> instead."
  21:/usr/include/x86_64-linux-gnu/bits/socket2.h **** #endif
  22:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  23:/usr/include/x86_64-linux-gnu/bits/socket2.h **** extern ssize_t __recv_chk (int __fd, void *__buf, size_t __n, size_t __buflen,
  24:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 			   int __flags);
  25:/usr/include/x86_64-linux-gnu/bits/socket2.h **** extern ssize_t __REDIRECT (__recv_alias, (int __fd, void *__buf, size_t __n,
  26:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 					  int __flags), recv);
  27:/usr/include/x86_64-linux-gnu/bits/socket2.h **** extern ssize_t __REDIRECT (__recv_chk_warn,
  28:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 			   (int __fd, void *__buf, size_t __n, size_t __buflen,
  29:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 			    int __flags), __recv_chk)
  30:/usr/include/x86_64-linux-gnu/bits/socket2.h ****      __warnattr ("recv called with bigger length than size of destination "
  31:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 		 "buffer");
  32:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  33:/usr/include/x86_64-linux-gnu/bits/socket2.h **** __fortify_function ssize_t
  34:/usr/include/x86_64-linux-gnu/bits/socket2.h **** recv (int __fd, void *__buf, size_t __n, int __flags)
  35:/usr/include/x86_64-linux-gnu/bits/socket2.h **** {
  36:/usr/include/x86_64-linux-gnu/bits/socket2.h ****   if (__bos0 (__buf) != (size_t) -1)
  37:/usr/include/x86_64-linux-gnu/bits/socket2.h ****     {
  38:/usr/include/x86_64-linux-gnu/bits/socket2.h ****       if (!__builtin_constant_p (__n))
  39:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 	return __recv_chk (__fd, __buf, __n, __bos0 (__buf), __flags);
  40:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 
  41:/usr/include/x86_64-linux-gnu/bits/socket2.h ****       if (__n > __bos0 (__buf))
  42:/usr/include/x86_64-linux-gnu/bits/socket2.h **** 	return __recv_chk_warn (__fd, __buf, __n, __bos0 (__buf), __flags);
  43:/usr/include/x86_64-linux-gnu/bits/socket2.h ****     }
  44:/usr/include/x86_64-linux-gnu/bits/socket2.h ****   return __recv_alias (__fd, __buf, __n, __flags);
 368              		.loc 3 44 0
 369 0006 B9000000 		movl	$0, %ecx
 369      00
 370 000b E8000000 		call	recv
 370      00
 371              	.LVL44:
 372              	.LBE9:
 373              	.LBE8:
 208:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 209:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = recv(fd, buf, len, 0);
 210:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
 211:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = at_api_recv(fd, buf, len);
 212:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
 213:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = wiznet_recv(fd, buf, len);
 214:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
 215:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     (void)fd; //clear unuse warning
 216:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 217:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 218:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
GAS LISTING /tmp/ccuSnRYy.s 			page 16


 219:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ret < 0)
 374              		.loc 1 219 0
 375 0010 85C0     		testl	%eax, %eax
 376 0012 7957     		jns	.L21
 220:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 221:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         if (errno == EAGAIN || errno == EWOULDBLOCK || errno == EINTR)
 377              		.loc 1 221 0
 378 0014 E8000000 		call	__errno_location
 378      00
 379              	.LVL45:
 380 0019 8B08     		movl	(%rax), %ecx
 381 001b 83F90B   		cmpl	$11, %ecx
 382 001e 0F94C2   		sete	%dl
 383 0021 83F904   		cmpl	$4, %ecx
 384 0024 0F94C0   		sete	%al
 385 0027 08C2     		orb	%al, %dl
 386 0029 7420     		je	.L22
 222:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 223:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             SOCKET_LOG("no data available for now");
 387              		.loc 1 223 0
 388 002b BADF0000 		movl	$223, %edx
 388      00
 389 0030 BE000000 		movl	$__FUNCTION__.4752, %esi
 389      00
 390 0035 BF000000 		movl	$.LC8, %edi
 390      00
 391 003a B8000000 		movl	$0, %eax
 391      00
 392 003f E8000000 		call	atiny_printf
 392      00
 393              	.LVL46:
 224:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             return 0;
 394              		.loc 1 224 0
 395 0044 B8000000 		movl	$0, %eax
 395      00
 396 0049 EB3D     		jmp	.L23
 397              	.L22:
 225:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 226:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         else
 227:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 228:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             SOCKET_LOG("error accured when recv: 0x%x", errno);
 398              		.loc 1 228 0
 399 004b BAE40000 		movl	$228, %edx
 399      00
 400 0050 BE000000 		movl	$__FUNCTION__.4752, %esi
 400      00
 401 0055 BF000000 		movl	$.LC9, %edi
 401      00
 402 005a B8000000 		movl	$0, %eax
 402      00
 403 005f E8000000 		call	atiny_printf
 403      00
 404              	.LVL47:
 229:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             return -1;
 405              		.loc 1 229 0
 406 0064 B8FFFFFF 		movl	$-1, %eax
 406      FF
GAS LISTING /tmp/ccuSnRYy.s 			page 17


 407 0069 EB1D     		jmp	.L23
 408              	.LVL48:
 409              	.L21:
 230:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 231:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 232:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 233:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     else if (ret == 0)
 410              		.loc 1 233 0
 411 006b 85C0     		testl	%eax, %eax
 412 006d 7519     		jne	.L23
 234:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 235:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("socket was closed by peer");
 413              		.loc 1 235 0
 414 006f BAEB0000 		movl	$235, %edx
 414      00
 415 0074 BE000000 		movl	$__FUNCTION__.4752, %esi
 415      00
 416 0079 BF000000 		movl	$.LC10, %edi
 416      00
 417 007e E8000000 		call	atiny_printf
 417      00
 418              	.LVL49:
 236:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return -1;
 419              		.loc 1 236 0
 420 0083 B8FFFFFF 		movl	$-1, %eax
 420      FF
 421              	.L23:
 237:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 238:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 239:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     return ret;
 240:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** }
 422              		.loc 1 240 0
 423 0088 4883C408 		addq	$8, %rsp
 424              	.LCFI13:
 425              		.cfi_def_cfa_offset 8
 426 008c C3       		ret
 427              		.cfi_endproc
 428              	.LFE67:
 430              		.section	.rodata.str1.8
 431 023c 00000000 		.align 8
 432              	.LC11:
 433 0240 5B534F43 		.string	"[SOCKET][%s:%d] ilegal socket(%d)\r\n"
 433      4B45545D 
 433      5B25733A 
 433      25645D20 
 433      696C6567 
 434 0264 00000000 		.align 8
 435              	.LC12:
 436 0268 5B534F43 		.string	"[SOCKET][%s:%d] recv timeout\r\n"
 436      4B45545D 
 436      5B25733A 
 436      25645D20 
 436      72656376 
 437 0287 00       		.align 8
 438              	.LC13:
 439 0288 5B534F43 		.string	"[SOCKET][%s:%d] select error ret=%d,err 0x%x\r\n"
 439      4B45545D 
GAS LISTING /tmp/ccuSnRYy.s 			page 18


 439      5B25733A 
 439      25645D20 
 439      73656C65 
 440              		.section	.text.atiny_net_recv_timeout,"ax",@progbits
 441              		.globl	atiny_net_recv_timeout
 443              	atiny_net_recv_timeout:
 444              	.LFB68:
 241:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 242:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** int atiny_net_recv_timeout(void *ctx, unsigned char *buf, size_t len,
 243:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****                            uint32_t timeout)
 244:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
 445              		.loc 1 244 0
 446              		.cfi_startproc
 447              	.LVL50:
 448 0000 4156     		pushq	%r14
 449              	.LCFI14:
 450              		.cfi_def_cfa_offset 16
 451              		.cfi_offset 14, -16
 452 0002 4155     		pushq	%r13
 453              	.LCFI15:
 454              		.cfi_def_cfa_offset 24
 455              		.cfi_offset 13, -24
 456 0004 4154     		pushq	%r12
 457              	.LCFI16:
 458              		.cfi_def_cfa_offset 32
 459              		.cfi_offset 12, -32
 460 0006 55       		pushq	%rbp
 461              	.LCFI17:
 462              		.cfi_def_cfa_offset 40
 463              		.cfi_offset 6, -40
 464 0007 53       		pushq	%rbx
 465              	.LCFI18:
 466              		.cfi_def_cfa_offset 48
 467              		.cfi_offset 3, -48
 468 0008 4881EC90 		subq	$144, %rsp
 468      000000
 469              	.LCFI19:
 470              		.cfi_def_cfa_offset 192
 471              	.LVL51:
 245:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int ret = -1;
 246:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 247:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     struct timeval tv;
 248:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     fd_set read_fds;
 249:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 250:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 251:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int fd = ((atiny_net_context *)ctx)->fd;
 472              		.loc 1 251 0
 473 000f 8B1F     		movl	(%rdi), %ebx
 474              	.LVL52:
 252:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 253:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 254:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (fd < 0)
 475              		.loc 1 254 0
 476 0011 85DB     		testl	%ebx, %ebx
 477 0013 7925     		jns	.L27
 255:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 256:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("ilegal socket(%d)", fd);
GAS LISTING /tmp/ccuSnRYy.s 			page 19


 478              		.loc 1 256 0
 479 0015 89D9     		movl	%ebx, %ecx
 480              	.LVL53:
 481 0017 BA000100 		movl	$256, %edx
 481      00
 482              	.LVL54:
 483 001c BE000000 		movl	$__FUNCTION__.4763, %esi
 483      00
 484              	.LVL55:
 485 0021 BF000000 		movl	$.LC11, %edi
 485      00
 486              	.LVL56:
 487 0026 B8000000 		movl	$0, %eax
 487      00
 488 002b E8000000 		call	atiny_printf
 488      00
 489              	.LVL57:
 257:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return -1;
 490              		.loc 1 257 0
 491 0030 B8FFFFFF 		movl	$-1, %eax
 491      FF
 492 0035 E9FB0000 		jmp	.L28
 492      00
 493              	.LVL58:
 494              	.L27:
 495 003a 4989FC   		movq	%rdi, %r12
 496 003d 4989F5   		movq	%rsi, %r13
 497 0040 4989D6   		movq	%rdx, %r14
 498 0043 89CD     		movl	%ecx, %ebp
 499              	.LBB10:
 258:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 259:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 260:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     FD_ZERO(&read_fds);
 500              		.loc 1 260 0
 501 0045 4889E7   		movq	%rsp, %rdi
 502              	.LVL59:
 503 0048 B9100000 		movl	$16, %ecx
 503      00
 504              	.LVL60:
 505 004d B8000000 		movl	$0, %eax
 505      00
 506              	#APP
 507              	# 260 "/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socke
 261              	    FD_SET(fd, &read_fds);
 508              		cld; rep; stosq
 509              	# 0 "" 2
 510              	.LVL61:
 511              	#NO_APP
 512              	.LBE10:
 513              	.LBB11:
 514              		.loc 1 261 0
 515 0056 4863FB   		movslq	%ebx, %rdi
 516              	.LVL62:
 517 0059 E8000000 		call	__fdelt_chk
 517      00
 518              	.LVL63:
 519              	.LBE11:
GAS LISTING /tmp/ccuSnRYy.s 			page 20


 520 005e 89DA     		movl	%ebx, %edx
 521 0060 C1FA1F   		sarl	$31, %edx
 522 0063 C1EA1A   		shrl	$26, %edx
 523 0066 8D0C13   		leal	(%rbx,%rdx), %ecx
 524 0069 83E13F   		andl	$63, %ecx
 525 006c 29D1     		subl	%edx, %ecx
 526 006e BA010000 		movl	$1, %edx
 526      00
 527 0073 48D3E2   		salq	%cl, %rdx
 528 0076 480914C4 		orq	%rdx, (%rsp,%rax,8)
 262:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 263:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     tv.tv_sec  = timeout / 1000;
 529              		.loc 1 263 0
 530 007a BAD34D62 		movl	$274877907, %edx
 530      10
 531 007f 89E8     		movl	%ebp, %eax
 532 0081 F7E2     		mull	%edx
 533 0083 C1EA06   		shrl	$6, %edx
 534 0086 89D0     		movl	%edx, %eax
 535 0088 48898424 		movq	%rax, 128(%rsp)
 535      80000000 
 264:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     tv.tv_usec = (timeout % 1000) * 1000;
 536              		.loc 1 264 0
 537 0090 69D2E803 		imull	$1000, %edx, %edx
 537      0000
 538 0096 89E8     		movl	%ebp, %eax
 539 0098 29D0     		subl	%edx, %eax
 540 009a 69C0E803 		imull	$1000, %eax, %eax
 540      0000
 541 00a0 89C0     		movl	%eax, %eax
 542 00a2 48898424 		movq	%rax, 136(%rsp)
 542      88000000 
 265:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 266:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = select(fd + 1, &read_fds, NULL, NULL, timeout == 0 ? NULL : &tv);
 543              		.loc 1 266 0
 544 00aa 85ED     		testl	%ebp, %ebp
 545 00ac 740A     		je	.L32
 546 00ae 4C8D8424 		leaq	128(%rsp), %r8
 546      80000000 
 547 00b6 EB06     		jmp	.L29
 548              	.L32:
 549 00b8 41B80000 		movl	$0, %r8d
 549      0000
 550              	.L29:
 551              		.loc 1 266 0 is_stmt 0 discriminator 4
 552 00be 8D7B01   		leal	1(%rbx), %edi
 553 00c1 B9000000 		movl	$0, %ecx
 553      00
 554 00c6 BA000000 		movl	$0, %edx
 554      00
 555 00cb 4889E6   		movq	%rsp, %rsi
 556 00ce E8000000 		call	select
 556      00
 557              	.LVL64:
 558 00d3 89C3     		movl	%eax, %ebx
 559              	.LVL65:
 267:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
GAS LISTING /tmp/ccuSnRYy.s 			page 21


 268:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ret == 0)
 560              		.loc 1 268 0 is_stmt 1 discriminator 4
 561 00d5 85C0     		testl	%eax, %eax
 562 00d7 7520     		jne	.L30
 269:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 270:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("recv timeout");
 563              		.loc 1 270 0
 564 00d9 BA0E0100 		movl	$270, %edx
 564      00
 565 00de BE000000 		movl	$__FUNCTION__.4763, %esi
 565      00
 566 00e3 BF000000 		movl	$.LC12, %edi
 566      00
 567 00e8 B8000000 		movl	$0, %eax
 567      00
 568              	.LVL66:
 569 00ed E8000000 		call	atiny_printf
 569      00
 570              	.LVL67:
 271:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return -2;
 571              		.loc 1 271 0
 572 00f2 B8FEFFFF 		movl	$-2, %eax
 572      FF
 573 00f7 EB3C     		jmp	.L28
 574              	.LVL68:
 575              	.L30:
 272:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 273:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 274:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if(ret < 0)
 576              		.loc 1 274 0
 577 00f9 85C0     		testl	%eax, %eax
 578 00fb 792A     		jns	.L31
 275:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 276:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("select error ret=%d,err 0x%x", ret, errno);
 579              		.loc 1 276 0
 580 00fd E8000000 		call	__errno_location
 580      00
 581              	.LVL69:
 582 0102 448B00   		movl	(%rax), %r8d
 583 0105 89D9     		movl	%ebx, %ecx
 584 0107 BA140100 		movl	$276, %edx
 584      00
 585 010c BE000000 		movl	$__FUNCTION__.4763, %esi
 585      00
 586 0111 BF000000 		movl	$.LC13, %edi
 586      00
 587 0116 B8000000 		movl	$0, %eax
 587      00
 588 011b E8000000 		call	atiny_printf
 588      00
 589              	.LVL70:
 277:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return -1;
 590              		.loc 1 277 0
 591 0120 B8FFFFFF 		movl	$-1, %eax
 591      FF
 592 0125 EB0E     		jmp	.L28
 593              	.LVL71:
GAS LISTING /tmp/ccuSnRYy.s 			page 22


 594              	.L31:
 278:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 279:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 280:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = atiny_net_recv(ctx, buf, len);
 595              		.loc 1 280 0
 596 0127 4C89F2   		movq	%r14, %rdx
 597 012a 4C89EE   		movq	%r13, %rsi
 598 012d 4C89E7   		movq	%r12, %rdi
 599 0130 E8000000 		call	atiny_net_recv
 599      00
 600              	.LVL72:
 601              	.L28:
 281:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 282:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
 283:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = at_api_recv_timeout(fd, buf, len, timeout);
 284:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
 285:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = wiznet_recv_timeout(fd, buf, len, timeout);
 286:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
 287:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     (void)fd; //clear unuse warning
 288:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 289:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     return ret;
 290:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** }
 602              		.loc 1 290 0
 603 0135 4881C490 		addq	$144, %rsp
 603      000000
 604              	.LCFI20:
 605              		.cfi_def_cfa_offset 48
 606 013c 5B       		popq	%rbx
 607              	.LCFI21:
 608              		.cfi_def_cfa_offset 40
 609 013d 5D       		popq	%rbp
 610              	.LCFI22:
 611              		.cfi_def_cfa_offset 32
 612 013e 415C     		popq	%r12
 613              	.LCFI23:
 614              		.cfi_def_cfa_offset 24
 615 0140 415D     		popq	%r13
 616              	.LCFI24:
 617              		.cfi_def_cfa_offset 16
 618 0142 415E     		popq	%r14
 619              	.LCFI25:
 620              		.cfi_def_cfa_offset 8
 621 0144 C3       		ret
 622              		.cfi_endproc
 623              	.LFE68:
 625              		.section	.rodata.str1.8
 626 02b7 00       		.align 8
 627              	.LC14:
 628 02b8 5B534F43 		.string	"[SOCKET][%s:%d] error accured when send: 0x%x\r\n"
 628      4B45545D 
 628      5B25733A 
 628      25645D20 
 628      6572726F 
 629              		.section	.text.atiny_net_send,"ax",@progbits
 630              		.globl	atiny_net_send
 632              	atiny_net_send:
 633              	.LFB69:
GAS LISTING /tmp/ccuSnRYy.s 			page 23


 291:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 292:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** int atiny_net_send(void *ctx, const unsigned char *buf, size_t len)
 293:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
 634              		.loc 1 293 0
 635              		.cfi_startproc
 636              	.LVL73:
 637 0000 4883EC08 		subq	$8, %rsp
 638              	.LCFI26:
 639              		.cfi_def_cfa_offset 16
 640              	.LVL74:
 294:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int ret = -1;
 295:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int fd = ((atiny_net_context *)ctx)->fd;
 641              		.loc 1 295 0
 642 0004 8B3F     		movl	(%rdi), %edi
 643              	.LVL75:
 296:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 297:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (fd < 0)
 644              		.loc 1 297 0
 645 0006 85FF     		testl	%edi, %edi
 646 0008 7922     		jns	.L35
 298:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 299:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         SOCKET_LOG("ilegal socket(%d)", fd);
 647              		.loc 1 299 0
 648 000a 89F9     		movl	%edi, %ecx
 649 000c BA2B0100 		movl	$299, %edx
 649      00
 650              	.LVL76:
 651 0011 BE000000 		movl	$__FUNCTION__.4775, %esi
 651      00
 652              	.LVL77:
 653 0016 BF000000 		movl	$.LC11, %edi
 653      00
 654              	.LVL78:
 655 001b B8000000 		movl	$0, %eax
 655      00
 656 0020 E8000000 		call	atiny_printf
 656      00
 657              	.LVL79:
 300:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         return -1;
 658              		.loc 1 300 0
 659 0025 B8FFFFFF 		movl	$-1, %eax
 659      FF
 660 002a EB4A     		jmp	.L36
 661              	.LVL80:
 662              	.L35:
 301:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 302:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 303:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 304:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = send(fd, buf, len, 0);
 663              		.loc 1 304 0
 664 002c B9000000 		movl	$0, %ecx
 664      00
 665 0031 E8000000 		call	send
 665      00
 666              	.LVL81:
 305:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
 306:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = at_api_send(fd, buf, len);
GAS LISTING /tmp/ccuSnRYy.s 			page 24


 307:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
 308:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     ret = wiznet_send(fd, buf, len);
 309:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #else
 310:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 311:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 312:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 313:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (ret < 0)
 667              		.loc 1 313 0
 668 0036 85C0     		testl	%eax, %eax
 669 0038 793C     		jns	.L36
 314:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 315:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         /* no data available for now */
 316:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         if (errno == EAGAIN || errno == EWOULDBLOCK || errno == EINTR)
 670              		.loc 1 316 0
 671 003a E8000000 		call	__errno_location
 671      00
 672              	.LVL82:
 673 003f 8B08     		movl	(%rax), %ecx
 674 0041 83F90B   		cmpl	$11, %ecx
 675 0044 0F94C2   		sete	%dl
 676 0047 83F904   		cmpl	$4, %ecx
 677 004a 0F94C0   		sete	%al
 678 004d 08C2     		orb	%al, %dl
 679 004f 7520     		jne	.L38
 317:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 318:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             return 0;
 319:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 320:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         else
 321:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         {
 322:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             SOCKET_LOG("error accured when send: 0x%x", errno);
 680              		.loc 1 322 0
 681 0051 BA420100 		movl	$322, %edx
 681      00
 682 0056 BE000000 		movl	$__FUNCTION__.4775, %esi
 682      00
 683 005b BF000000 		movl	$.LC14, %edi
 683      00
 684 0060 B8000000 		movl	$0, %eax
 684      00
 685 0065 E8000000 		call	atiny_printf
 685      00
 686              	.LVL83:
 323:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****             return -1;
 687              		.loc 1 323 0
 688 006a B8FFFFFF 		movl	$-1, %eax
 688      FF
 689 006f EB05     		jmp	.L36
 690              	.L38:
 318:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 691              		.loc 1 318 0
 692 0071 B8000000 		movl	$0, %eax
 692      00
 693              	.L36:
 324:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         }
 325:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 326:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 327:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
GAS LISTING /tmp/ccuSnRYy.s 			page 25


 328:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     return ret;
 329:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** }
 694              		.loc 1 329 0
 695 0076 4883C408 		addq	$8, %rsp
 696              	.LCFI27:
 697              		.cfi_def_cfa_offset 8
 698 007a C3       		ret
 699              		.cfi_endproc
 700              	.LFE69:
 702              		.section	.text.atiny_net_close,"ax",@progbits
 703              		.globl	atiny_net_close
 705              	atiny_net_close:
 706              	.LFB70:
 330:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 331:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** void atiny_net_close(void *ctx)
 332:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** {
 707              		.loc 1 332 0
 708              		.cfi_startproc
 709              	.LVL84:
 710 0000 53       		pushq	%rbx
 711              	.LCFI28:
 712              		.cfi_def_cfa_offset 16
 713              		.cfi_offset 3, -16
 714 0001 4889FB   		movq	%rdi, %rbx
 333:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     int fd = ((atiny_net_context *)ctx)->fd;
 715              		.loc 1 333 0
 716 0004 8B3F     		movl	(%rdi), %edi
 717              	.LVL85:
 334:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 335:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     if (fd >= 0)
 718              		.loc 1 335 0
 719 0006 85FF     		testl	%edi, %edi
 720 0008 7805     		js	.L41
 336:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     {
 337:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #if defined(WITH_LINUX) || defined(WITH_LWIP)
 338:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         close(fd);
 721              		.loc 1 338 0
 722 000a E8000000 		call	close
 722      00
 723              	.LVL86:
 724              	.L41:
 339:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_AT_FRAMEWORK)
 340:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         at_api_close(fd);
 341:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #elif defined(WITH_WIZNET)
 342:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****         wiznet_close(fd);
 343:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** #endif
 344:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     }
 345:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** 
 346:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c ****     atiny_free(ctx);
 725              		.loc 1 346 0
 726 000f 4889DF   		movq	%rbx, %rdi
 727 0012 E8000000 		call	atiny_free
 727      00
 728              	.LVL87:
 347:/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_socket.c **** }
 729              		.loc 1 347 0
 730 0017 5B       		popq	%rbx
GAS LISTING /tmp/ccuSnRYy.s 			page 26


 731              	.LCFI29:
 732              		.cfi_def_cfa_offset 8
 733              	.LVL88:
 734 0018 C3       		ret
 735              		.cfi_endproc
 736              	.LFE70:
 738              		.section	.rodata.__FUNCTION__.4775,"a",@progbits
 739              		.align 8
 742              	__FUNCTION__.4775:
 743 0000 6174696E 		.string	"atiny_net_send"
 743      795F6E65 
 743      745F7365 
 743      6E6400
 744              		.section	.rodata.__FUNCTION__.4763,"a",@progbits
 745              		.align 16
 748              	__FUNCTION__.4763:
 749 0000 6174696E 		.string	"atiny_net_recv_timeout"
 749      795F6E65 
 749      745F7265 
 749      63765F74 
 749      696D656F 
 750              		.section	.rodata.__FUNCTION__.4752,"a",@progbits
 751              		.align 8
 754              	__FUNCTION__.4752:
 755 0000 6174696E 		.string	"atiny_net_recv"
 755      795F6E65 
 755      745F7265 
 755      637600
 756              		.section	.rodata.__FUNCTION__.4740,"a",@progbits
 757              		.align 16
 760              	__FUNCTION__.4740:
 761 0000 6174696E 		.string	"atiny_net_connect"
 761      795F6E65 
 761      745F636F 
 761      6E6E6563 
 761      7400
 762              		.text
 763              	.Letext0:
 764              		.file 4 "/usr/lib/gcc/x86_64-linux-gnu/5/include/stddef.h"
 765              		.file 5 "/usr/include/x86_64-linux-gnu/bits/types.h"
 766              		.file 6 "/usr/include/libio.h"
 767              		.file 7 "/usr/include/stdio.h"
 768              		.file 8 "/usr/include/stdint.h"
 769              		.file 9 "/usr/include/x86_64-linux-gnu/bits/time.h"
 770              		.file 10 "/usr/include/x86_64-linux-gnu/sys/select.h"
 771              		.file 11 "/usr/include/x86_64-linux-gnu/bits/socket.h"
 772              		.file 12 "/usr/include/x86_64-linux-gnu/bits/sockaddr.h"
 773              		.file 13 "/usr/include/netdb.h"
 774              		.file 14 "/home/baikal/workspace/C50/Huawei_IoT_Agent_Tiny_SDK_Linux//agent_tiny/osadapter/atiny_a
 775              		.file 15 "/usr/include/x86_64-linux-gnu/sys/socket.h"
 776              		.file 16 "/usr/include/fcntl.h"
 777              		.file 17 "/usr/include/unistd.h"
 778              		.file 18 "/usr/include/x86_64-linux-gnu/bits/errno.h"
 779              		.file 19 "/usr/include/x86_64-linux-gnu/bits/select2.h"
 780              		.file 20 "/usr/include/x86_64-linux-gnu/bits/socket_type.h"
 781              		.file 21 "/usr/include/netinet/in.h"
GAS LISTING /tmp/ccuSnRYy.s 			page 27


DEFINED SYMBOLS
                            *ABS*:0000000000000000 atiny_socket.c
     /tmp/ccuSnRYy.s:32     .text.atiny_net_connect:0000000000000000 atiny_net_connect
     /tmp/ccuSnRYy.s:760    .rodata.__FUNCTION__.4740:0000000000000000 __FUNCTION__.4740
     /tmp/ccuSnRYy.s:353    .text.atiny_net_recv:0000000000000000 atiny_net_recv
     /tmp/ccuSnRYy.s:754    .rodata.__FUNCTION__.4752:0000000000000000 __FUNCTION__.4752
     /tmp/ccuSnRYy.s:443    .text.atiny_net_recv_timeout:0000000000000000 atiny_net_recv_timeout
     /tmp/ccuSnRYy.s:748    .rodata.__FUNCTION__.4763:0000000000000000 __FUNCTION__.4763
     /tmp/ccuSnRYy.s:632    .text.atiny_net_send:0000000000000000 atiny_net_send
     /tmp/ccuSnRYy.s:742    .rodata.__FUNCTION__.4775:0000000000000000 __FUNCTION__.4775
     /tmp/ccuSnRYy.s:705    .text.atiny_net_close:0000000000000000 atiny_net_close

UNDEFINED SYMBOLS
atiny_printf
getaddrinfo
atiny_malloc
freeaddrinfo
socket
fcntl
close
connect
atiny_free
recv
__errno_location
__fdelt_chk
select
send
